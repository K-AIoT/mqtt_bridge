<launch>
    <arg name="use_gui" default="false"/>
    <arg name="use_rviz" default="false"/>
    <arg name="robot_type" value="$(env ROBOT_TYPE)" doc="robot_type [X1,X3,X3plus,R2,X7]"/>
    <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find yahboomcar_description)/urdf/yahboomcar_$(arg robot_type).urdf'"/>
    
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

    <!-- MQTT Bridge node -->
    <node name="mqtt_bridge" pkg="mqtt_bridge" type="mqtt_bridge_node.py" output="screen">
        <rosparam file="$(find mqtt_bridge)/config/bridge_config.yaml" command="load"/>
    </node>

    <!-- Lidar coordinate system -->
    <node pkg="tf" type="static_transform_publisher" name="laser_link_to_laser"
          args="0 0 0 6.28 0 0  /laser_link /laser 30" if="$(eval arg('robot_type') == 'X3plus')"/>

    <!-- driver module -->
    <include file="$(find ydlidar_ros_driver)/launch/TG.launch"/>
    <include file="$(find yahboomcar_bringup)/launch/bringup.launch"/>

</launch>

    

    